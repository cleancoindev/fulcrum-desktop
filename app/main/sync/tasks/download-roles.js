'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _client = require('../../api/client');

var _client2 = _interopRequireDefault(_client);

var _role = require('../../models/role');

var _role2 = _interopRequireDefault(_role);

var _downloadResource = require('./download-resource');

var _downloadResource2 = _interopRequireDefault(_downloadResource);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class DownloadRoles extends _downloadResource2.default {
  get resourceName() {
    return 'roles';
  }

  get typeName() {
    return 'role';
  }

  fetchObjects(lastSync, sequence) {
    return _client2.default.getRoles(this.account);
  }

  fetchLocalObjects() {
    return this.account.findRoles();
  }

  findOrCreate(database, attributes) {
    return _role2.default.findOrCreate(database, { resource_id: attributes.id, account_id: this.account.rowID });
  }
}
exports.default = DownloadRoles;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tYWluL3N5bmMvdGFza3MvZG93bmxvYWQtcm9sZXMuanMiXSwibmFtZXMiOlsiRG93bmxvYWRSb2xlcyIsInJlc291cmNlTmFtZSIsInR5cGVOYW1lIiwiZmV0Y2hPYmplY3RzIiwibGFzdFN5bmMiLCJzZXF1ZW5jZSIsImdldFJvbGVzIiwiYWNjb3VudCIsImZldGNoTG9jYWxPYmplY3RzIiwiZmluZFJvbGVzIiwiZmluZE9yQ3JlYXRlIiwiZGF0YWJhc2UiLCJhdHRyaWJ1dGVzIiwicmVzb3VyY2VfaWQiLCJpZCIsImFjY291bnRfaWQiLCJyb3dJRCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxhQUFOLG9DQUE2QztBQUMxRCxNQUFJQyxZQUFKLEdBQW1CO0FBQ2pCLFdBQU8sT0FBUDtBQUNEOztBQUVELE1BQUlDLFFBQUosR0FBZTtBQUNiLFdBQU8sTUFBUDtBQUNEOztBQUVEQyxlQUFhQyxRQUFiLEVBQXVCQyxRQUF2QixFQUFpQztBQUMvQixXQUFPLGlCQUFPQyxRQUFQLENBQWdCLEtBQUtDLE9BQXJCLENBQVA7QUFDRDs7QUFFREMsc0JBQW9CO0FBQ2xCLFdBQU8sS0FBS0QsT0FBTCxDQUFhRSxTQUFiLEVBQVA7QUFDRDs7QUFFREMsZUFBYUMsUUFBYixFQUF1QkMsVUFBdkIsRUFBbUM7QUFDakMsV0FBTyxlQUFLRixZQUFMLENBQWtCQyxRQUFsQixFQUE0QixFQUFDRSxhQUFhRCxXQUFXRSxFQUF6QixFQUE2QkMsWUFBWSxLQUFLUixPQUFMLENBQWFTLEtBQXRELEVBQTVCLENBQVA7QUFDRDtBQW5CeUQ7a0JBQXZDaEIsYSIsImZpbGUiOiJkb3dubG9hZC1yb2xlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDbGllbnQgZnJvbSAnLi4vLi4vYXBpL2NsaWVudCc7XG5pbXBvcnQgUm9sZSBmcm9tICcuLi8uLi9tb2RlbHMvcm9sZSc7XG5pbXBvcnQgRG93bmxvYWRSZXNvdXJjZSBmcm9tICcuL2Rvd25sb2FkLXJlc291cmNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG93bmxvYWRSb2xlcyBleHRlbmRzIERvd25sb2FkUmVzb3VyY2Uge1xuICBnZXQgcmVzb3VyY2VOYW1lKCkge1xuICAgIHJldHVybiAncm9sZXMnO1xuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCkge1xuICAgIHJldHVybiAncm9sZSc7XG4gIH1cblxuICBmZXRjaE9iamVjdHMobGFzdFN5bmMsIHNlcXVlbmNlKSB7XG4gICAgcmV0dXJuIENsaWVudC5nZXRSb2xlcyh0aGlzLmFjY291bnQpO1xuICB9XG5cbiAgZmV0Y2hMb2NhbE9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjb3VudC5maW5kUm9sZXMoKTtcbiAgfVxuXG4gIGZpbmRPckNyZWF0ZShkYXRhYmFzZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBSb2xlLmZpbmRPckNyZWF0ZShkYXRhYmFzZSwge3Jlc291cmNlX2lkOiBhdHRyaWJ1dGVzLmlkLCBhY2NvdW50X2lkOiB0aGlzLmFjY291bnQucm93SUR9KTtcbiAgfVxufVxuIl19