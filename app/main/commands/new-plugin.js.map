{"version":3,"sources":["../../../src/main/commands/new-plugin.js"],"names":["NewPlugin","run","pluginPath","app","dir","files","commands","newPluginPath","join","args","name","push","file","sourcePath","resolve","__dirname","string","console","log","start"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,SAAN,2BAAgC;AACxBC,KAAN,GAAY;AAAA;;AAAA;AACV,YAAMC,aAAa,MAAKC,GAAL,CAASC,GAAT,CAAa,SAAb,CAAnB;;AAEA,YAAMC,QAAQ,CACZ,cADY,EAEZ,WAFY,EAGZ,YAHY,CAAd;;AAMA,YAAMC,WAAW,EAAjB;;AAEA,YAAMC,gBAAgB,eAAKC,IAAL,CAAUN,UAAV,EAAsB,MAAKO,IAAL,CAAUC,IAAhC,CAAtB;;AAEAJ,eAASK,IAAT,CAAe,YAAWJ,aAAc,EAAxC;;AAEA,WAAK,MAAMK,IAAX,IAAmBP,KAAnB,EAA0B;AACxB,cAAMQ,aAAa,eAAKC,OAAL,CAAa,eAAKN,IAAL,CAAUO,SAAV,EAAqB,IAArB,EAA2B,IAA3B,EAAiC,WAAjC,EAA8C,gBAA9C,EAAgEH,IAAhE,CAAb,CAAnB;;AAEAN,iBAASK,IAAT,CAAe,MAAKE,UAAW,IAAGN,aAAc,EAAhD;AACD;;AAEDD,eAASK,IAAT,CAAe,MAAKJ,aAAc,EAAlC;AACAD,eAASK,IAAT,CAAc,MAAd;AACAL,eAASK,IAAT,CAAc,UAAd;;AAEA,YAAMK,SAASV,SAASE,IAAT,CAAc,MAAd,CAAf;;AAEAS,cAAQC,GAAR,CAAY,eAAZ;;AAEA,mCAASF,MAAT;;AAEAC,cAAQC,GAAR,CAAY,mBAAZ,EAAiC,eAAKV,IAAL,CAAUN,UAAV,EAAsB,MAAKO,IAAL,CAAUC,IAAhC,CAAjC;AACAO,cAAQC,GAAR,CAAY,8BAAZ;AACAD,cAAQC,GAAR,CAAY,kBAAkB,MAAKT,IAAL,CAAUC,IAAxC;AAjCU;AAkCX;AAnC6B;;AAsChC,IAAIV,SAAJ,GAAgBmB,KAAhB","file":"new-plugin.js","sourcesContent":["import Command from './command';\nimport path from 'path';\nimport { execSync } from 'child_process';\n\nclass NewPlugin extends Command {\n  async run() {\n    const pluginPath = this.app.dir('plugins');\n\n    const files = [\n      'package.json',\n      'plugin.js',\n      '.gitignore'\n    ];\n\n    const commands = [];\n\n    const newPluginPath = path.join(pluginPath, this.args.name);\n\n    commands.push(`mkdir -p ${newPluginPath}`);\n\n    for (const file of files) {\n      const sourcePath = path.resolve(path.join(__dirname, '..', '..', 'resources', 'default-plugin', file));\n\n      commands.push(`cp ${sourcePath} ${newPluginPath}`);\n    }\n\n    commands.push(`cd ${newPluginPath}`);\n    commands.push('yarn');\n    commands.push('git init');\n\n    const string = commands.join(' && ');\n\n    console.log('Installing...');\n\n    execSync(string);\n\n    console.log('Plugin created at', path.join(pluginPath, this.args.name));\n    console.log('Run the plugin task using:\\n');\n    console.log('  ./run task ' + this.args.name);\n  }\n}\n\nnew NewPlugin().start();\n"]}