{"version":3,"sources":["../src/app.js"],"names":["app","App","instance","constructor","_plugins","initialize","initializePlugins","pluginPaths","sync","join","pluginPath","fullPath","resolve","console","log","PluginClass","require","default","plugin","push"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAIA,MAAM,IAAV;;AAEA,MAAMC,GAAN,0BAA+B;AAC7B,aAAWC,QAAX,GAAsB;AACpB,WAAOF,GAAP;AACD;;AAEDG,gBAAc;AACZ;;AAEA,SAAKC,QAAL,GAAgB,EAAhB;AACD;;AAEKC,YAAN,GAAmB;AAAA;;AAAA;AACjB,YAAM,MAAKC,iBAAL,EAAN;AADiB;AAElB;;AAEKA,mBAAN,GAA0B;AAAA;;AAAA;AACxB,YAAMC,cAAc,eAAKC,IAAL,CAAU,eAAKC,IAAL,CAAU,GAAV,EAAe,SAAf,EAA0B,MAA1B,CAAV,CAApB;;AAEA,WAAK,MAAMC,UAAX,IAAyBH,WAAzB,EAAsC;AACpC,cAAMI,WAAW,eAAKC,OAAL,CAAaF,UAAb,CAAjB;;AAEAG,gBAAQC,GAAR,CAAY,gBAAZ,EAA8BH,QAA9B;;AAEA,cAAMI,cAAcC,QAAQL,QAAR,EAAkBM,OAAtC;;AAEA,cAAMC,SAAS,IAAIH,WAAJ,EAAf;;AAEA,cAAMG,OAAOb,UAAP,CAAkB,EAACL,WAAD,EAAlB,CAAN;;AAEA,eAAKI,QAAL,CAAce,IAAd,CAAmBD,MAAnB;AACD;AAfuB;AAgBzB;;AAED;AACA;AACA;AAnC6B;;AAsC/BlB,MAAM,IAAIC,GAAJ,EAAN;;kBAEeD,G","file":"app.js","sourcesContent":["import EventEmitter from 'events';\nimport glob from 'glob';\nimport path from 'path';\n\nlet app = null;\n\nclass App extends EventEmitter {\n  static get instance() {\n    return app;\n  }\n\n  constructor() {\n    super();\n\n    this._plugins = [];\n  }\n\n  async initialize() {\n    await this.initializePlugins();\n  }\n\n  async initializePlugins() {\n    const pluginPaths = glob.sync(path.join('.', 'plugins', '*.js'));\n\n    for (const pluginPath of pluginPaths) {\n      const fullPath = path.resolve(pluginPath);\n\n      console.log('Loading plugin', fullPath);\n\n      const PluginClass = require(fullPath).default;\n\n      const plugin = new PluginClass();\n\n      await plugin.initialize({app: this});\n\n      this._plugins.push(plugin);\n    }\n  }\n\n  // emit(name, ...args) {\n  //   this.emit(name, {app: this, ...args[0]});\n  // }\n}\n\napp = new App();\n\nexport default app;\n"]}