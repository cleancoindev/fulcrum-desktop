{"version":3,"sources":["../../src/models/account.js"],"names":["Account","tableName","columns","name","column","type","null","userResourceID","_userResourceID","organizationResourceID","_organizationResourceID","organizationName","_organizationName","email","_email","firstName","_firstName","lastName","_lastName","token","_token","findByUserAndOrganization","userID","organizationID","callback","findFirst","user_resource_id","organization_resource_id","findForms","where","findAll","db","account_id","rowID","findActiveForms","deleted_at","projectByResourceID","projectId","findSyncState","findOrCreate","register"],"mappings":";;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAEe,MAAMA,OAAN,CAAc;AAC3B,aAAWC,SAAX,GAAuB;AACrB,WAAO,UAAP;AACD;;AAED,aAAWC,OAAX,GAAqB;AACnB,WAAO,CACL,EAAEC,MAAM,gBAAR,EAA0BC,QAAQ,kBAAlC,EAAsDC,MAAM,QAA5D,EAAsEC,MAAM,KAA5E,EADK,EAEL,EAAEH,MAAM,wBAAR,EAAkCC,QAAQ,0BAA1C,EAAsEC,MAAM,QAA5E,EAAsFC,MAAM,KAA5F,EAFK,EAGL,EAAEH,MAAM,kBAAR,EAA4BC,QAAQ,mBAApC,EAAyDC,MAAM,QAA/D,EAAyEC,MAAM,KAA/E,EAHK,EAIL,EAAEH,MAAM,OAAR,EAAiBC,QAAQ,OAAzB,EAAkCC,MAAM,QAAxC,EAAkDC,MAAM,KAAxD,EAJK,EAKL,EAAEH,MAAM,WAAR,EAAqBC,QAAQ,YAA7B,EAA2CC,MAAM,QAAjD,EALK,EAML,EAAEF,MAAM,UAAR,EAAoBC,QAAQ,WAA5B,EAAyCC,MAAM,QAA/C,EANK,EAOL,EAAEF,MAAM,OAAR,EAAiBC,QAAQ,OAAzB,EAAkCC,MAAM,QAAxC,EAPK,CAAP;AASD;;AAED,MAAIE,cAAJ,GAAqB;AACnB,WAAO,KAAKC,eAAZ;AACD;;AAED,MAAIC,sBAAJ,GAA6B;AAC3B,WAAO,KAAKC,uBAAZ;AACD;;AAED,MAAIC,gBAAJ,GAAuB;AACrB,WAAO,KAAKC,iBAAZ;AACD;;AAED,MAAIC,KAAJ,GAAY;AACV,WAAO,KAAKC,MAAZ;AACD;;AAED,MAAIC,SAAJ,GAAgB;AACd,WAAO,KAAKC,UAAZ;AACD;;AAED,MAAIC,QAAJ,GAAe;AACb,WAAO,KAAKC,SAAZ;AACD;;AAED,MAAIC,KAAJ,GAAY;AACV,WAAO,KAAKC,MAAZ;AACD;;AAED,SAAOC,yBAAP,CAAiCC,MAAjC,EAAyCC,cAAzC,EAAyDC,QAAzD,EAAmE;AACjE,WAAOxB,QAAQyB,SAAR,CAAkB,EAACC,kBAAkBJ,MAAnB;AACCK,gCAA0BJ,cAD3B,EAAlB,EAC8DC,QAD9D,CAAP;AAED;;AAEDI,YAAUC,KAAV,EAAiB;AACf,WAAO,eAAKC,OAAL,CAAa,KAAKC,EAAlB,eAA0BF,KAA1B,IAAiCG,YAAY,KAAKC,KAAlD,KAA0D,UAA1D,CAAP;AACD;;AAEDC,kBAAgBL,KAAhB,EAAuB;AACrB,WAAO,eAAKC,OAAL,CAAa,KAAKC,EAAlB,eAA0BF,KAA1B,IAAiCG,YAAY,KAAKC,KAAlD,EAAyDE,YAAY,IAArE,KAA4E,UAA5E,CAAP;AACD;;AAEDC,sBAAoBC,SAApB,EAA+B;AAC7B,WAAO,kBAAQZ,SAAR,CAAkB,KAAKM,EAAvB,EAA2B,EAACC,YAAY,KAAKC,KAAlB,EAA3B,CAAP;AACD;;AAEDK,gBAAcT,KAAd,EAAqB;AACnB,WAAO,oBAAUU,YAAV,CAAuB,KAAKR,EAA5B,eAAoCF,KAApC,IAA2CG,YAAY,KAAKC,KAA5D,IAAP;AACD;AAhE0B;;kBAARjC,O;AAmErB,yBAAiBwC,QAAjB,CAA0BxC,OAA1B","file":"account.js","sourcesContent":["import { PersistentObject } from 'minidb';\nimport Project from './project';\nimport Form from './form';\nimport SyncState from './sync-state';\n\nexport default class Account {\n  static get tableName() {\n    return 'accounts';\n  }\n\n  static get columns() {\n    return [\n      { name: 'userResourceID', column: 'user_resource_id', type: 'string', null: false },\n      { name: 'organizationResourceID', column: 'organization_resource_id', type: 'string', null: false },\n      { name: 'organizationName', column: 'organization_name', type: 'string', null: false },\n      { name: 'email', column: 'email', type: 'string', null: false },\n      { name: 'firstName', column: 'first_name', type: 'string' },\n      { name: 'lastName', column: 'last_name', type: 'string' },\n      { name: 'token', column: 'token', type: 'string' }\n    ];\n  }\n\n  get userResourceID() {\n    return this._userResourceID;\n  }\n\n  get organizationResourceID() {\n    return this._organizationResourceID;\n  }\n\n  get organizationName() {\n    return this._organizationName;\n  }\n\n  get email() {\n    return this._email;\n  }\n\n  get firstName() {\n    return this._firstName;\n  }\n\n  get lastName() {\n    return this._lastName;\n  }\n\n  get token() {\n    return this._token;\n  }\n\n  static findByUserAndOrganization(userID, organizationID, callback) {\n    return Account.findFirst({user_resource_id: userID,\n                              organization_resource_id: organizationID}, callback);\n  }\n\n  findForms(where) {\n    return Form.findAll(this.db, {...where, account_id: this.rowID}, 'name ASC');\n  }\n\n  findActiveForms(where) {\n    return Form.findAll(this.db, {...where, account_id: this.rowID, deleted_at: null}, 'name ASC');\n  }\n\n  projectByResourceID(projectId) {\n    return Project.findFirst(this.db, {account_id: this.rowID});\n  }\n\n  findSyncState(where) {\n    return SyncState.findOrCreate(this.db, {...where, account_id: this.rowID});\n  }\n}\n\nPersistentObject.register(Account);\n"]}