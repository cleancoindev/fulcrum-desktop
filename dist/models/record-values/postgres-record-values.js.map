{"version":3,"sources":["../../../src/models/record-values/postgres-record-values.js"],"names":["PostgresRecordValues","setupSearch","values","feature","searchableValue","record_index_text","record_index","raw","setupPoint","latitude","longitude","wkt"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEe,MAAMA,oBAAN,gCAAgD;AAC7D,SAAOC,WAAP,CAAmBC,MAAnB,EAA2BC,OAA3B,EAAoC;AAClC,UAAMC,kBAAkBD,QAAQC,eAAhC;;AAEAF,WAAOG,iBAAP,GAA2BD,eAA3B;AACAF,WAAOI,YAAP,GAAsB,EAACC,KAAM,eAAe,wBAAS,IAAT,EAAeH,eAAf,CAAiC,GAAvD,EAAtB;;AAEA,WAAOF,MAAP;AACD;;AAED,SAAOM,UAAP,CAAkBN,MAAlB,EAA0BO,QAA1B,EAAoCC,SAApC,EAA+C;AAC7C,UAAMC,MAAM,wBAAS,cAAT,EAAyBD,SAAzB,EAAoCD,QAApC,CAAZ;;AAEA,WAAO,EAACF,KAAM,0CAA0CI,GAAK,YAAtD,EAAP;AACD;AAd4D;kBAA1CX,oB","file":"postgres-record-values.js","sourcesContent":["import RecordValues from './record-values';\nimport pgformat from 'pg-format';\n\nexport default class PostgresRecordValues extends RecordValues {\n  static setupSearch(values, feature) {\n    const searchableValue = feature.searchableValue;\n\n    values.record_index_text = searchableValue;\n    values.record_index = {raw: `to_tsvector(${ pgformat('%L', searchableValue) })`};\n\n    return values;\n  }\n\n  static setupPoint(values, latitude, longitude) {\n    const wkt = pgformat('POINT(%s %s)', longitude, latitude);\n\n    return {raw: `ST_Force2D(ST_SetSRID(ST_GeomFromText('${ wkt }'), 4326))`};\n  }\n}\n"]}