{"version":3,"sources":["../../src/commands/sync.js"],"names":["Sync","run","accounts","fetchAccount","args","org","account","syncLoop","sync","dataSource","createDataSource","synchronizer","form","Promise","resolve","setTimeout","start"],"mappings":";;AAAA;;;;AACA;;;;;;;;AAEA,MAAMA,IAAN,2BAA2B;AACnBC,KAAN,GAAY;AAAA;;AAAA;AACV,YAAMC,WAAW,MAAM,MAAKC,YAAL,CAAkB,MAAKC,IAAL,CAAUC,GAA5B,CAAvB;;AAEA,WAAK,MAAMC,OAAX,IAAsBJ,QAAtB,EAAgC;AAC9B,cAAM,MAAKK,QAAL,CAAcD,OAAd,CAAN;AACA;AACD;AANS;AAOX;;AAEKC,UAAN,CAAeD,OAAf,EAAwB;AAAA;;AAAA;AACtB,YAAME,OAAO,IAAb;;AAEA,YAAMC,aAAa,MAAM,OAAKC,gBAAL,CAAsBJ,OAAtB,CAAzB;;AAEA,aAAOE,IAAP,EAAa;AACX,cAAMG,eAAe,4BAArB;;AAEA,cAAMA,aAAaV,GAAb,CAAiBK,OAAjB,EAA0B,OAAKF,IAAL,CAAUQ,IAApC,EAA0CH,UAA1C,CAAN;;AAEA,cAAM,IAAII,OAAJ,CAAY,UAACC,OAAD;AAAA,iBAAaC,WAAWD,OAAX,EAAoB,KAApB,CAAb;AAAA,SAAZ,CAAN;AACD;AAXqB;AAYvB;AAtBwB;;AAyB3B,IAAId,IAAJ,GAAWgB,KAAX","file":"sync.js","sourcesContent":["import Command from './command';\nimport Synchronizer from '../sync/synchronizer';\n\nclass Sync extends Command {\n  async run() {\n    const accounts = await this.fetchAccount(this.args.org);\n\n    for (const account of accounts) {\n      await this.syncLoop(account);\n      // await Synchronizer.instance.run(account, this.args.form, dataSource);\n    }\n  }\n\n  async syncLoop(account) {\n    const sync = true;\n\n    const dataSource = await this.createDataSource(account);\n\n    while (sync) {\n      const synchronizer = new Synchronizer();\n\n      await synchronizer.run(account, this.args.form, dataSource);\n\n      await new Promise((resolve) => setTimeout(resolve, 10000));\n    }\n  }\n}\n\nnew Sync().start();\n"]}